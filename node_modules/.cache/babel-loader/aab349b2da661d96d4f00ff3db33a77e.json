{"remainingRequest":"D:\\Code\\project\\vue-shp\\node_modules\\babel-loader\\lib\\index.js!D:\\Code\\project\\vue-shp\\src\\store\\user.js","dependencies":[{"path":"D:\\Code\\project\\vue-shp\\src\\store\\user.js","mtime":1662970058184},{"path":"D:\\Code\\project\\vue-shp\\babel.config.js","mtime":1642509932178},{"path":"D:\\Code\\project\\vue-shp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1642509914891},{"path":"D:\\Code\\project\\vue-shp\\node_modules\\babel-loader\\lib\\index.js","mtime":1642509917213}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6XFxDb2RlXFxwcm9qZWN0XFx2dWUtc2hwXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFxhc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiOwovLyDnmbvlvZXkuI7ms6jlhoznmoTku5PlupMKaW1wb3J0IHsgcmVxR2V0Q29kZSwgcmVxVXNlclJlZ2lzdGVyLCByZXFVc2VyTG9naW4sIHJlcVVzZXJJbmZvLCByZXFMb2dPdXQgfSBmcm9tICcuLi9hcGknOwppbXBvcnQgeyBzZXRUb2tlbiwgZ2V0VG9rZW4sIHJlbW92ZVRva2VuIH0gZnJvbSAnLi4vdXRpbHMvdG9rZW4nOwp2YXIgc3RhdGUgPSB7CiAgY29kZTogJycsCiAgdG9rZW46IGdldFRva2VuLAogIHVzZXJJbmZvOiB7fQp9Owp2YXIgbXV0YXRpb25zID0gewogIEdFVENPREU6IGZ1bmN0aW9uIEdFVENPREUoc3RhdGUsIGNvZGUpIHsKICAgIHN0YXRlLmNvZGUgPSBjb2RlOwogIH0sCiAgVVNFUkxPR0lOOiBmdW5jdGlvbiBVU0VSTE9HSU4oc3RhdGUsIHRva2VuKSB7CiAgICBzdGF0ZS50b2tlbiA9IHRva2VuOwogIH0sCiAgR0VUVVNFUklORk86IGZ1bmN0aW9uIEdFVFVTRVJJTkZPKHN0YXRlLCB1c2VySW5mbykgewogICAgc3RhdGUudXNlckluZm8gPSB1c2VySW5mbzsKICB9LAogIENMRUFSOiBmdW5jdGlvbiBDTEVBUihzdGF0ZSkgewogICAgLy8g5oqK5LuT5bqT5Lit55u45YWz55So5oi35L+h5oGv5riF56m6CiAgICBzdGF0ZS50b2tlbiA9ICcnLCBzdGF0ZS51c2VySW5mbyA9IHt9OwogICAgcmVtb3ZlVG9rZW4oKTsKICB9Cn07CnZhciBhY3Rpb25zID0gewogIC8vIOiOt+WPlumqjOivgeeggQogIGdldENvZGU6IGZ1bmN0aW9uIGdldENvZGUoX3JlZiwgcGhvbmUpIHsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciBjb21taXQsIHJlc3VsdDsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiByZXFHZXRDb2RlKHBob25lKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICBpZiAoIShyZXN1bHQuY29kZSA9PSAyMDApKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gOTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY29tbWl0KCdHRVRDT0RFJywgcmVzdWx0LmRhdGEpOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsICdvaycpOwoKICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignZmFpbGUnKSkpOwoKICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSkoKTsKICB9LAogIC8vIOeUqOaIt+azqOWGjAogIHVzZXJSZWdpc3RlcjogZnVuY3Rpb24gdXNlclJlZ2lzdGVyKF9yZWYyLCB1c2VyKSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgdmFyIGNvbW1pdCwgcmVzdWx0OwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWYyLmNvbW1pdDsKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIHJlcVVzZXJSZWdpc3Rlcih1c2VyKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dDIuc2VudDsKCiAgICAgICAgICAgICAgaWYgKCEocmVzdWx0LmNvZGUgPT0gMjAwKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA4OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgJ29rJyk7CgogICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignZmFpbGUnKSkpOwoKICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTIpOwogICAgfSkpKCk7CiAgfSwKICAvLyDnmbvlvZXkuJrliqHjgJB0b2tlbuOAkQogIHVzZXJMb2dpbjogZnVuY3Rpb24gdXNlckxvZ2luKF9yZWYzLCBkYXRhKSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgdmFyIGNvbW1pdCwgcmVzdWx0OwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWYzLmNvbW1pdDsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIHJlcVVzZXJMb2dpbihkYXRhKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dDMuc2VudDsKCiAgICAgICAgICAgICAgaWYgKCEocmVzdWx0LmNvZGUgPT0gMjAwKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxMDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY29tbWl0KCdVU0VSTE9HSU4nLCByZXN1bHQuZGF0YS50b2tlbik7IC8vIOaMgeS5heWMluWtmOWCqHRva2VuCgogICAgICAgICAgICAgIHNldFRva2VuKHJlc3VsdC5kYXRhLnRva2VuKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgJ29rJyk7CgogICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ2ZhaWxlJykpKTsKCiAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMyk7CiAgICB9KSkoKTsKICB9LAogIC8vIOiOt+WPlueUqOaIt+S/oeaBrwogIGdldFVzZXJJbmZvOiBmdW5jdGlvbiBnZXRVc2VySW5mbyhfcmVmNCwgZGF0YSkgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgIHZhciBjb21taXQsIHJlc3VsdDsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBjb21taXQgPSBfcmVmNC5jb21taXQ7CiAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiByZXFVc2VySW5mbygpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0NC5zZW50OwoKICAgICAgICAgICAgICBpZiAoIShyZXN1bHQuY29kZSA9PSAyMDApKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIC8vIOaPkOS6pOeUqOaIt+S/oeaBrwogICAgICAgICAgICAgIGNvbW1pdCgiR0VUVVNFUklORk8iLCByZXN1bHQuZGF0YSk7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIsICdvaycpOwoKICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ2ZhaWxlJykpKTsKCiAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlNCk7CiAgICB9KSkoKTsKICB9LAogIC8vIOmAgOWHuueZu+W9lQogIHVzZXJMb2dPdXQ6IGZ1bmN0aW9uIHVzZXJMb2dPdXQoX3JlZjUpIHsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU1KCkgewogICAgICB2YXIgY29tbWl0LCByZXN1bHQ7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgY29tbWl0ID0gX3JlZjUuY29tbWl0OwogICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gcmVxTG9nT3V0KCk7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQ1LnNlbnQ7CgogICAgICAgICAgICAgIGlmICghKHJlc3VsdC5jb2RlID09IDIwMCkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gODsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY29tbWl0KCJDTEVBUiIpOwogICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gOTsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdCgicmV0dXJuIiwgUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdmYWlsZScpKSk7CgogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlNSk7CiAgICB9KSkoKTsKICB9Cn07CnZhciBnZXR0ZXJzID0ge307CmV4cG9ydCBkZWZhdWx0IHsKICBzdGF0ZTogc3RhdGUsCiAgbXV0YXRpb25zOiBtdXRhdGlvbnMsCiAgYWN0aW9uczogYWN0aW9ucywKICBnZXR0ZXJzOiBnZXR0ZXJzCn07"},{"version":3,"sources":["D:/Code/project/vue-shp/src/store/user.js"],"names":["reqGetCode","reqUserRegister","reqUserLogin","reqUserInfo","reqLogOut","setToken","getToken","removeToken","state","code","token","userInfo","mutations","GETCODE","USERLOGIN","GETUSERINFO","CLEAR","actions","getCode","phone","commit","result","data","Promise","reject","Error","userRegister","user","userLogin","getUserInfo","userLogOut","getters"],"mappings":"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","sourcesContent":["// 登录与注册的仓库\r\nimport {reqGetCode,reqUserRegister,reqUserLogin,reqUserInfo,reqLogOut} from '../api'\r\nimport {setToken,getToken,removeToken} from '../utils/token'\r\nconst state={\r\n    code:'',\r\n    token:getToken,\r\n    userInfo:{}\r\n}\r\nconst mutations={\r\n    GETCODE(state,code){\r\n        state.code=code\r\n    },\r\n    USERLOGIN(state,token){\r\n        state.token=token\r\n    },\r\n    GETUSERINFO(state,userInfo){\r\n        state.userInfo = userInfo\r\n    },\r\n    CLEAR(state){\r\n        // 把仓库中相关用户信息清空\r\n        state.token='',\r\n        state.userInfo={}\r\n        removeToken()\r\n    }\r\n}\r\nconst actions={\r\n    // 获取验证码\r\n    async getCode({commit},phone){\r\n        let result =await reqGetCode(phone)\r\n        if(result.code==200){\r\n            commit('GETCODE',result.data)\r\n            return 'ok'\r\n        }else{\r\n            return Promise.reject(new Error('faile'))\r\n        }\r\n    },\r\n    // 用户注册\r\n    async userRegister({commit},user){\r\n        let result = await reqUserRegister(user)\r\n        if(result.code==200){\r\n            return 'ok'\r\n        }else{\r\n            return Promise.reject(new Error('faile'))\r\n        }\r\n    },\r\n    // 登录业务【token】\r\n    async userLogin({commit},data){\r\n        let result = await reqUserLogin(data)\r\n        // 服务器下发的token是用户的唯一标识符\r\n        if(result.code==200){\r\n            commit('USERLOGIN',result.data.token)\r\n            // 持久化存储token\r\n            setToken(result.data.token)\r\n            return 'ok'\r\n        }else{\r\n            return Promise.reject(new Error('faile'))\r\n        }\r\n    } ,\r\n    // 获取用户信息\r\n    async getUserInfo({commit},data){\r\n        // 用户已经成功登录且获取到token\r\n        let result = await reqUserInfo()\r\n        if(result.code==200){\r\n            // 提交用户信息\r\n            commit(\"GETUSERINFO\",result.data)\r\n            return 'ok'\r\n        }else{\r\n            return Promise.reject(new Error('faile'))\r\n        }\r\n    },\r\n    // 退出登录\r\n    async userLogOut({commit}){\r\n        // 只是向服务器发请求通知服务器清楚token\r\n        let result = await reqLogOut()\r\n        // action里不能修改state，要提交mutation修改state\r\n        if(result.code==200){\r\n            commit(\"CLEAR\")\r\n        }else{\r\n            return Promise.reject(new Error('faile'))\r\n        }\r\n    }\r\n}\r\nconst getters={}\r\nexport default{\r\n    state,\r\n    mutations,\r\n    actions,\r\n    getters\r\n}"]}]}