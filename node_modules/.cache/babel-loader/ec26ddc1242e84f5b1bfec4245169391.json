{"remainingRequest":"D:\\Code\\project\\app\\node_modules\\babel-loader\\lib\\index.js!D:\\Code\\project\\app\\src\\router\\index.js","dependencies":[{"path":"D:\\Code\\project\\app\\src\\router\\index.js","mtime":1662970376328},{"path":"D:\\Code\\project\\app\\babel.config.js","mtime":1642509932178},{"path":"D:\\Code\\project\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1642509914891},{"path":"D:\\Code\\project\\app\\node_modules\\babel-loader\\lib\\index.js","mtime":1642509917213}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6XFxDb2RlXFxwcm9qZWN0XFxhcHBcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lXFxoZWxwZXJzXFxlc21cXGFzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKLy8g6YWN572u6Lev55SxCmltcG9ydCBWdWUgZnJvbSAidnVlIjsKaW1wb3J0IFZ1ZVJvdXRlciBmcm9tICJ2dWUtcm91dGVyIjsKaW1wb3J0IHJvdXRlcyBmcm9tICcuL3JvdXRlcy5qcyc7CmltcG9ydCBzdG9yZSBmcm9tICcuLi9zdG9yZSc7IC8vIOS9v+eUqOaPkuS7tgoKVnVlLnVzZShWdWVSb3V0ZXIpOyAvLyDlhYjmiopWdWVSb3V0ZXLljp/lnovlr7nosaHnmoRwdXNofHJlcGxhY2Xkv53lrZjkuIDku70KCnZhciBvcmlnaW5QdXNoID0gVnVlUm91dGVyLnByb3RvdHlwZS5wdXNoOwp2YXIgb3JpZ2luUmVwbGFjZSA9IFZ1ZVJvdXRlci5wcm90b3R5cGUucmVwbGFjZTsgLy8g6YeN5pawcHVzaHxyZXBsYWNl5pa55rOVCgpWdWVSb3V0ZXIucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiAobG9jYXRpb24sIHJlc29sdmUsIHJlamVjdCkgewogIGlmIChyZXNvbHZlICYmIHJlamVjdCkgewogICAgb3JpZ2luUHVzaC5jYWxsKHRoaXMsIGxvY2F0aW9uLCByZXNvbHZlLCByZWplY3QpOwogIH0gZWxzZSB7CiAgICBvcmlnaW5QdXNoLmNhbGwodGhpcywgbG9jYXRpb24sIGZ1bmN0aW9uICgpIHt9LCBmdW5jdGlvbiAoKSB7fSk7CiAgfQp9OwoKVnVlUm91dGVyLnByb3RvdHlwZS5yZXBsYWNlID0gZnVuY3Rpb24gKGxvY2F0aW9uLCByZXNvbHZlLCByZWplY3QpIHsKICBpZiAocmVzb2x2ZSAmJiB0aGlzLnJlcGxhY2UpIHsKICAgIC8vIGNhbGx8YXBwbHnnm7jlkIzngrnvvJrpg73lj6/ku6XosIPnlKjlh73mlbDkuIDmrKHvvIzkuZ/lj6/ku6Xnr6HmlLnlh73mlbDkuIrkuIvmlofkuIDmrKEKICAgIC8vIGNhbGx8YXBwbHnljLrliKvvvJpjYWxs5Lyg6YCS5aSa5Liq5Y+C5pWw55So6YCX5Y+36ZqU5byA77yMYXBwbHnkvKDpgJLlj4LmlbDkvb/nlKjmlbDnu4QKICAgIG9yaWdpblJlcGxhY2UuY2FsbCh0aGlzLCBsb2NhdGlvbiwgcmVzb2x2ZSwgcmVqZWN0KTsKICB9IGVsc2UgewogICAgb3JpZ2luUmVwbGFjZS5jYWxsKHRoaXMsIGxvY2F0aW9uLCBmdW5jdGlvbiAoKSB7fSwgZnVuY3Rpb24gKCkge30pOwogIH0KfTsKCnZhciByb3V0ZXIgPSBuZXcgVnVlUm91dGVyKHsKICByb3V0ZXM6IHJvdXRlcywKICAvLyDmu5rliqjooYzkuLoKICBzY3JvbGxCZWhhdmlvcjogZnVuY3Rpb24gc2Nyb2xsQmVoYXZpb3IodG8sIGZyb20sIHNhdmVkUG9zaXRpb24pIHsKICAgIC8vIHk6MOS7o+ihqOi3r+eUsei3s+i9rOWQjua7muWKqOadoeWcqOacgOS4iuaWuQogICAgcmV0dXJuIHsKICAgICAgeTogMAogICAgfTsKICB9Cn0pOyAvLyDlhajlsYDlrojljavvvJrliY3nva7lrojljasKCnJvdXRlci5iZWZvcmVFYWNoKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHRvLCBmcm9tLCBuZXh0KSB7CiAgICB2YXIgdG9rZW4sIG5hbWU7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIC8vIHRvOuWPr+S7peiOt+WPluWIsOS9oOaDs+i3s+WIsOeahOi3r+eUseeahOS/oeaBrwogICAgICAgICAgICAvLyBmcm9t77ya5Y+v5Lul6I635Y+W5Yiw5L2g5LuO5ZOq5Liq6Lev55Sx5p2l55qE5L+h5oGvCiAgICAgICAgICAgIC8vIG5leHTvvJrmlL7ooYzlh73mlbAg5YWo6YOo5pS+6KGM77yabmV4dCgpIOaUvuihjOaMh+Wumui3r+eUse+8mm5leHQoJy9sb2dpbicpICBuZXh0KGZhbHNlKQogICAgICAgICAgICAvLyBuZXh0KCk7CiAgICAgICAgICAgIC8vIOeUqOaIt+eZu+W9leS6huaJjeS8muaciXRva2VuCiAgICAgICAgICAgIHRva2VuID0gc3RvcmUuc3RhdGUudXNlci50b2tlbjsKICAgICAgICAgICAgbmFtZSA9IHN0b3JlLnN0YXRlLnVzZXIudXNlckluZm8ubmFtZTsKCiAgICAgICAgICAgIGlmICghdG9rZW4pIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjQ7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICghKHRvLnBhdGggPT0gJy9sb2dpbicpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG5leHQoJy9ob21lJyk7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMjsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICBpZiAoIW5hbWUpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIOWmguaenOeZu+W9leS6hgogICAgICAgICAgICBuZXh0KCk7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMjsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDExOwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTQ7CiAgICAgICAgICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCgnZ2V0VXNlckluZm8nKTsKCiAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICBuZXh0KCk7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMjsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE3OwogICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDExKTsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIxOwogICAgICAgICAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goJ3VzZXJMb2dPdXQnKTsKCiAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICBuZXh0KCcvbG9naW4nKTsKCiAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjU7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgMjQ6CiAgICAgICAgICAgIC8vIOacqueZu+W9lQogICAgICAgICAgICBuZXh0KCk7CgogICAgICAgICAgY2FzZSAyNToKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzExLCAxN11dKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiAoX3gsIF94MiwgX3gzKSB7CiAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKSk7CmV4cG9ydCBkZWZhdWx0IHJvdXRlcjs="},{"version":3,"sources":["D:/Code/project/app/src/router/index.js"],"names":["Vue","VueRouter","routes","store","use","originPush","prototype","push","originReplace","replace","location","resolve","reject","call","router","scrollBehavior","to","from","savedPosition","y","beforeEach","next","token","state","user","name","userInfo","path","dispatch"],"mappings":";;;;;AAAA;AACA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,OAAOC,KAAP,MAAkB,UAAlB,C,CACA;;AACAH,GAAG,CAACI,GAAJ,CAAQH,SAAR,E,CACA;;AACA,IAAII,UAAU,GAAGJ,SAAS,CAACK,SAAV,CAAoBC,IAArC;AACA,IAAIC,aAAa,GAAGP,SAAS,CAACK,SAAV,CAAoBG,OAAxC,C,CACA;;AACAR,SAAS,CAACK,SAAV,CAAoBC,IAApB,GAA2B,UAAUG,QAAV,EAAoBC,OAApB,EAA6BC,MAA7B,EAAqC;AAC5D,MAAID,OAAO,IAAIC,MAAf,EAAuB;AACnBP,IAAAA,UAAU,CAACQ,IAAX,CAAgB,IAAhB,EAAsBH,QAAtB,EAAgCC,OAAhC,EAAyCC,MAAzC;AACH,GAFD,MAEO;AACHP,IAAAA,UAAU,CAACQ,IAAX,CAAgB,IAAhB,EAAsBH,QAAtB,EAAgC,YAAM,CAAG,CAAzC,EAA2C,YAAM,CAAG,CAApD;AACH;AACJ,CAND;;AAOAT,SAAS,CAACK,SAAV,CAAoBG,OAApB,GAA8B,UAAUC,QAAV,EAAoBC,OAApB,EAA6BC,MAA7B,EAAqC;AAC/D,MAAID,OAAO,IAAI,KAAKF,OAApB,EAA6B;AACzB;AACA;AACAD,IAAAA,aAAa,CAACK,IAAd,CAAmB,IAAnB,EAAyBH,QAAzB,EAAmCC,OAAnC,EAA4CC,MAA5C;AACH,GAJD,MAIO;AACHJ,IAAAA,aAAa,CAACK,IAAd,CAAmB,IAAnB,EAAyBH,QAAzB,EAAmC,YAAM,CAAG,CAA5C,EAA8C,YAAM,CAAG,CAAvD;AACH;AACJ,CARD;;AASA,IAAII,MAAM,GAAG,IAAIb,SAAJ,CAAc;AACvBC,EAAAA,MAAM,EAANA,MADuB;AAEvB;AACAa,EAAAA,cAHuB,0BAGRC,EAHQ,EAGJC,IAHI,EAGEC,aAHF,EAGiB;AACpC;AACA,WAAO;AAAEC,MAAAA,CAAC,EAAE;AAAL,KAAP;AACH;AANsB,CAAd,CAAb,C,CASA;;AACAL,MAAM,CAACM,UAAP;AAAA,qEAAkB,iBAAOJ,EAAP,EAAWC,IAAX,EAAiBI,IAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AACd;AACA;AACA;AACA;AACA;AACIC,YAAAA,KANU,GAMFnB,KAAK,CAACoB,KAAN,CAAYC,IAAZ,CAAiBF,KANf;AAOVG,YAAAA,IAPU,GAOHtB,KAAK,CAACoB,KAAN,CAAYC,IAAZ,CAAiBE,QAAjB,CAA0BD,IAPvB;;AAAA,iBAQVH,KARU;AAAA;AAAA;AAAA;;AAAA,kBASNN,EAAE,CAACW,IAAH,IAAW,QATL;AAAA;AAAA;AAAA;;AAUNN,YAAAA,IAAI,CAAC,OAAD,CAAJ;AAVM;AAAA;;AAAA;AAAA,iBAYFI,IAZE;AAAA;AAAA;AAAA;;AAaF;AACAJ,YAAAA,IAAI;AAdF;AAAA;;AAAA;AAAA;AAAA;AAAA,mBAkBQlB,KAAK,CAACyB,QAAN,CAAe,aAAf,CAlBR;;AAAA;AAmBEP,YAAAA,IAAI;AAnBN;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,mBAuBQlB,KAAK,CAACyB,QAAN,CAAe,YAAf,CAvBR;;AAAA;AAwBEP,YAAAA,IAAI,CAAC,QAAD,CAAJ;;AAxBF;AAAA;AAAA;;AAAA;AA6BV;AACAA,YAAAA,IAAI;;AA9BM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAlB;;AAAA;AAAA;AAAA;AAAA;AAmCA,eAAeP,MAAf","sourcesContent":["// 配置路由\r\nimport Vue from \"vue\";\r\nimport VueRouter from \"vue-router\";\r\nimport routes from './routes.js'\r\nimport store from '../store'\r\n// 使用插件\r\nVue.use(VueRouter)\r\n// 先把VueRouter原型对象的push|replace保存一份\r\nlet originPush = VueRouter.prototype.push\r\nlet originReplace = VueRouter.prototype.replace\r\n// 重新push|replace方法\r\nVueRouter.prototype.push = function (location, resolve, reject) {\r\n    if (resolve && reject) {\r\n        originPush.call(this, location, resolve, reject)\r\n    } else {\r\n        originPush.call(this, location, () => { }, () => { })\r\n    }\r\n}\r\nVueRouter.prototype.replace = function (location, resolve, reject) {\r\n    if (resolve && this.replace) {\r\n        // call|apply相同点：都可以调用函数一次，也可以篡改函数上下文一次\r\n        // call|apply区别：call传递多个参数用逗号隔开，apply传递参数使用数组\r\n        originReplace.call(this, location, resolve, reject)\r\n    } else {\r\n        originReplace.call(this, location, () => { }, () => { })\r\n    }\r\n}\r\nlet router = new VueRouter({\r\n    routes,\r\n    // 滚动行为\r\n    scrollBehavior(to, from, savedPosition) {\r\n        // y:0代表路由跳转后滚动条在最上方\r\n        return { y: 0 }\r\n    },\r\n})\r\n\r\n// 全局守卫：前置守卫\r\nrouter.beforeEach(async (to, from, next) => {\r\n    // to:可以获取到你想跳到的路由的信息\r\n    // from：可以获取到你从哪个路由来的信息\r\n    // next：放行函数 全部放行：next() 放行指定路由：next('/login')  next(false)\r\n    // next();\r\n    // 用户登录了才会有token\r\n    let token = store.state.user.token\r\n    let name = store.state.user.userInfo.name\r\n    if (token) {\r\n        if (to.path == '/login') {\r\n            next('/home')\r\n        } else {\r\n            if (name) {\r\n                // 如果登录了\r\n                next()\r\n            } else {\r\n                // 如果没登录 派发action让仓库存储用户信息再跳转\r\n                try {\r\n                    await store.dispatch('getUserInfo')\r\n                    next()\r\n                } catch (error) {\r\n                    // token失效 获取不到用户信息\r\n                    // 清除token\r\n                    await store.dispatch('userLogOut')\r\n                    next('/login')\r\n                }\r\n            }\r\n        }\r\n    } else {\r\n        // 未登录\r\n        next()\r\n    }\r\n})\r\n\r\n\r\nexport default router"]}]}